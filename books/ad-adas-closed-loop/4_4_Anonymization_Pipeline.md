---
title: "4.4 匿名化（顔・ナンバー消し等）"
---

# 4.4 匿名化（顔・ナンバー消し等）

この節では、オフライン匿名化パイプラインとプライバシー保護のための処理について解説します。顔やナンバープレートのマスキング、モデルを用いた自動マスキングと残存リスク、法規制（GDPR 等）や社内ポリシーとの整合性、そしてデータ中心・Closed-Loop の観点から、匿名化処理がデータ品質とモデル性能に与える影響を考えます。

## オフライン匿名化パイプライン

収集されたログに対し、学習・評価に利用する前にオフラインで匿名化処理を行う構成が一般的です。

- 画像に対して顔・ナンバープレート検出モデルを適用し、該当領域をぼかす・黒塗りする・低解像度化する。
- 点群に対しても、歩行者など識別性の高い部分に対する処理を検討する。
- 匿名化前の原本データへのアクセスを厳しく制限し、通常の開発者は匿名化済みデータのみを扱う。

実務的には、次のようなステップでパイプラインを構成することが多いです。

1. 車載ロガーやアップロードゲートウェイからデータレイクの「未処理ゾーン (raw zone)」にデータを格納する。
2. 匿名化専用の処理ジョブ（バッチまたはストリーミング）を実行し、顔・ナンバー・建物名などの識別子を検出・加工する。
3. 匿名化済みデータを「分析・学習ゾーン」に配置し、ラベリング・学習・評価はこのゾーンのみを対象とする。
4. 原本データは厳格にアクセス制御されたストレージに保管し、限られた権限の下でのみ調査用途に利用する。

画像匿名化の検出ステップでは、一般的な物体検出モデル（YOLO 系、Transformer ベースの検出モデル等）をカスタマイズし、顔・ナンバープレート・看板などを検出対象とするケースが多いです。オープンソースフレームワーク（MMDetection, Detectron2 など）を利用すると、匿名化対象クラスに特化した検出器を学習しやすくなります。

## モデルを用いた自動マスキングと残存リスク

匿名化モデル自体にも誤検出・検出漏れが存在するため、完全な匿名化は難しいことが多いです。Closed-Loop の観点では、匿名化モデルの性能を継続的に評価し、残存リスクを許容範囲に抑えることが求められます。また、匿名化処理が Perception モデルの性能に与える影響も評価し、必要に応じて匿名化時の画質やマスク方法を調整します。

匿名化モデルの評価では、一般的な検出タスクと同様に Precision / Recall / mAP のような指標を用いますが、「誤検出よりも検出漏れの方が重大」という非対称性を踏まえた運用が多いです。つまり、

- 検出漏れ（顔・ナンバーを見逃す）を極小化するために、多少の誤検出（非顔領域のマスク）を許容する。
- 誤検出によるマスクが Perception / Planning の性能に与える影響を、代表的なシナリオで検証する。

といった方針です。マスク方法としては、

- ガウシアンぼかしやモザイク処理。
- 完全な黒塗り。
- 低解像度へのダウンサンプリング。

などがよく用いられます。どの方式を選ぶかは、プライバシー保護レベルとモデル性能への影響のバランスで決めます。例えば、顔領域だけを強くぼかし、周辺のコンテキストは保持することで、歩行者検出性能への影響を抑えつつプライバシー保護を確保する設計が考えられます。

## 法規制・ポリシーと匿名化レベル

匿名化は技術的な問題であると同時に、法規制・社内ポリシーとの整合性の問題でもあります。欧州の GDPR や各国の個人情報保護法では、顔・ナンバープレート・居住地が推測できる情報などは個人データとして扱われることが多く、十分な匿名化が行われていないデータの取り扱いには厳しい制約があります。

実務では、法務・コンプライアンス担当と連携し、以下のような観点で匿名化レベルを定義します。

- 「完全匿名化 (anonymization)」として扱える水準か、それとも「仮名化 (pseudonymization)」に留まるのか。
- 社外ベンダーやアノテーションパートナーに提供できるのはどのレベルのデータか。
- 特定の国・地域の規制に合わせて、匿名化のポリシーを切り替える必要があるか。

これらのポリシーは、一度決めて終わりではなく、規制や事業展開の変化に合わせて見直されるべきです。Closed-Loop の観点では、匿名化ポリシーの変更がデータセットとモデルにどのような影響を与えるかを評価し、必要に応じて再学習・再評価・再承認（4.10 節）を行います。

## 点群・マップ・テレメトリにおける匿名化

画像以外のモダリティにも、個人や機密情報に関わるデータが含まれることがあります。

- 点群 (LiDAR)：人物のシルエットや車両形状から個人・企業を推定できる可能性があります。解像度の低下、距離・角度の量子化、特定領域のマスクなどが検討されます。
- HD マップ：建物名・店舗名・私道などの情報が含まれる場合、公開範囲に応じてマスク・一般化（例: 建物カテゴリのみ残す）を行います。
- テレメトリ：緯度経度を粗いメッシュに丸める、時刻をラウンドする、識別可能な ID（VIN, Driver ID 等）をハッシュ化するなどの処理を行います。

これらの匿名化は、過度に行うと AD / ADAS モデルの性能やマップ整合性に悪影響を与えるため、ユースケースごとに必要なレベルを丁寧に検討する必要があります。

## 匿名化とモデル性能のトレードオフ

匿名化処理は、しばしば Perception / Prediction / Planning モデルの入力品質を低下させます。例えば、顔やナンバーを黒塗りすると、テクスチャの一部が失われ、検出モデルの特徴量分布が変化します。このため、以下のような Closed-Loop な検証サイクルが推奨されます。

1. 匿名化前後のデータで、同一のラベルを用いて Perception / Prediction モデルを評価する。
2. 匿名化パラメータ（ぼかしの強さ、マスクサイズなど）を変化させ、性能変化をプロットする。
3. プライバシー保護レベルとモデル性能の両方を満たすパラメータの範囲を特定する。

この検証を自動化するために、匿名化バージョンをデータセットスキーマ（4.6 節）の一部として管理し、「モデル X は匿名化バージョン v2 のデータで学習・評価された」といった形でトレーサビリティを確保することが重要です。

## 匿名化パイプラインを支えるツール群

匿名化パイプラインの実装では、以下のようなツール・フレームワークがよく利用されます。

- 物体検出フレームワーク：顔・ナンバープレートなどの検出器を学習するためのフレームワーク（YOLO 系、MMDetection、Detectron2 等）。
- 画像処理ライブラリ：OpenCV, Pillow などを用いたぼかし・モザイク・クロッピング処理。
- 分散処理基盤：大量の動画・画像・点群に対して匿名化処理をスケールアウトするための Spark / Dask / Ray 等の分散処理フレームワーク。

特定のプロダクトに依存せず、「検出モデル」「加工処理」「スケジューラ」の 3 層を疎結合に設計しておくと、将来的なモデル入れ替えやクラウド／オンプレ環境の変更にも対応しやすくなります。

