# 7.9 セーフティケース管理と ISO 26262 / SOTIF 準拠の証跡

この節では、セーフティケース管理と ISO 26262 / SOTIF 準拠の証跡について解説します。要件・テスト・結果のトレーサビリティ、シナリオベースでのリスクアセスメントと残余リスク、安全アーギュメントとの結びつけを整理し、データ中心・Closed-Loop の観点から「評価データを安全ケースの一部として扱う」考え方を紹介します。

> 本節は、法的または認証上の助言を提供するものではありません。実際の認証・法令対応については、必ず専門家・認証機関と相談のうえで判断してください。

## セーフティケースと Safety Argument の基本

セーフティケース (safety case) とは、「システムが所定の安全要求を満たしていることを示すための、主張・根拠・前提条件の体系的な集合」です。ISO 26262 や ISO 21448 (SOTIF) などの規格においても、システムの安全性を証明するためのエビデンスとして、セーフティケースの構築が求められることが多いです。

セーフティケースでは、しばしば Goal Structuring Notation (GSN) などの表記法を用いて、

- Goal（安全目標）
- Strategy（分割・論証方針）
- Evidence（テスト結果・解析結果・設計文書など）
- Assumption / Context（前提条件・適用範囲）

の関係を図式化します。自動運転・ADAS の文脈では、シナリオベーステストや Closed-Loop 評価の結果が、この Evidence の重要な一部を構成します。

## シナリオベースのリスクアセスメントと残余リスク

ISO 26262 では、危険事象のリスクを「重大度 (Severity)」「曝露頻度 (Exposure)」「回避可能性 (Controllability)」の組み合わせとして評価する枠組みが採用されています。SOTIF では、機能安全に加えて「意図した機能の限界」や「誤仕様・不完全仕様」に起因するリスクも対象となります。

シナリオベースの開発では、これらのリスク評価をシナリオ単位で行うことが多いです。例えば、

- シナリオ: 都市部交差点右折時、対向直進車とのギャップが小さい状況。
  - Severity: 衝突時の影響が大きいため高。
  - Exposure: 対象地域・サービス形態に応じて中〜高。
  - Controllability: ドライバー監視付きシステムか、完全自動運転かによって変化。

といった形でスコアリングを行い、シナリオごとのリスクレベルを定義します。その上で、

- 当該シナリオに対して、どのような検出機能・制御機能・フェイルセーフが実装されているか。
- SiL / HiL / 実車テストで、どの程度の成功率・安全マージンが確認されているか。
- 残余リスク（対策を行っても残るリスク）が、受容可能なレベルか。

をセーフティケースの一部として論証していきます。

## 要件・テスト・結果のトレーサビリティ

セーフティケースの説得力を高めるには、「要件 → 設計 → 実装 → テスト → 結果」のトレーサビリティが重要です。データ中心・Closed-Loop の観点からは、特に以下のリンクを明示的に管理することが望ましいです。

- 安全目標・安全要求 ↔ シナリオ:
  - 各安全目標・安全要求が、どのシナリオ群で検証されているか。
  - 逆に、各シナリオがどの安全目標の論証に寄与しているか。
- シナリオ ↔ テスト結果:
  - シナリオ ID ごとに、どのモデルバージョン・ECU 構成でどのような結果が得られたか。
  - 失敗ケースに対して、どのような是正処置（再学習・アルゴリズム修正）が行われたか。
- データ ↔ シナリオ:
  - シナリオがどの実車ログ・シミュレーション設定から生成されたか。
  - データセットに含まれるサンプルが、どのシナリオ・ODD セグメントに属するか。

これらのトレーサビリティ情報は、第 3〜5 章で扱ったデータレイク・メタデータ管理、第 7.2〜7.6 節で扱ったシナリオ DB・カバレッジ管理と密接に結び付いています。セーフティケースの観点からは、「どの Evidence がどの Goal を支えているか」を定量的に示せることが重要です。

## 証跡とドキュメント管理

セーフティケースで用いる証跡 (evidence) には、テストレポートだけでなく、設計文書・解析結果・ツール認証証明書など、多様なアーティファクトが含まれます。データ中心・Closed-Loop の時代には、これに加えて以下のようなデータも重要な証跡となり得ます。

- 評価に使用したシナリオセットの定義（DSL ファイル、メタデータ）。
- シナリオ実行時のログ（センサデータ、コマンド、内部状態の一部）。
- 分析スクリプト・ノートブック・ダッシュボード定義。
- データ品質チェック結果やラベリング品質指標（第 4〜5 章）。

これらをバラバラに保管してしまうと、時間の経過とともに再現性が失われ、セーフティケースのメンテナンスが困難になります。そのため、実務では次のような運用が検討されます。

- 各モデルリリースごとに、「評価・認証パッケージ」をまとめたアーティファクトを生成する。
- このパッケージを、長期保存が可能なストレージとメタデータカタログに登録する。
- パッケージ内には、再現に必要なスクリプト・コンテナイメージ・設定ファイルへの参照を含める。

第 8 章で述べるモデル管理・リリース管理と連携することで、「どのリリースがどのセーフティケースに対応しているか」を明確にし、将来のアップデート時に必要な再評価範囲を判断しやすくなります。

## データ中心・Closed-Loop 開発と安全認証の関係

最後に、本書全体で扱ってきたデータ中心・Closed-Loop 開発と、安全認証との関係を整理します。

- データ中心・Closed-Loop 開発は、モデル性能を継続的に改善するための強力な枠組みですが、同時に「頻繁な変更」が発生するという意味で、安全認証上の課題も生じます。
- 一方で、シナリオベーステスト・カバレッジ管理・トレーサビリティの仕組みが整っていれば、「どの変更がどのリスクに影響し、どの範囲を再評価したか」を明確に説明しやすくなります。
- その意味で、データ中心・Closed-Loop の実践は、安全認証と対立するものではなく、むしろ安全ケースの説得力とメンテナンス性を高める基盤となり得ると考えられます。

繰り返しになりますが、本節は認証取得そのものの手順を解説するものではありません。本書で述べた考え方を参考にしつつ、実際のプロジェクトでは、安全・法務・認証の専門家と連携しながら、自組織に適したセーフティケース管理と証跡運用を設計していただきたいです。
